<HTML>
<HEAD>
   <TITLE> module LogLib (generated by f90doc) </TITLE>
</HEAD>
<H1> Module LogLib </H1>
<PRE>module LogLib

        ! Uses
    use <A HREF="datatypesizes.html">DataTypeSizes</A>, ONLY : short
    use <A HREF="errorcodes.html">ErrorCodes</A>, ONLY : openFileError

        ! Variables
    logical, public :: <A HREF="loglib.html#var_verbose">verbose</A> = .TRUE.
    integer (kind=short), public :: <A HREF="loglib.html#var_logunit">logUnit</A>
    integer (kind=short), private, PARAMETER :: <A HREF="loglib.html#var_stringlen">stringLen</A> = 500
    integer (kind=short), public, PARAMETER :: <A HREF="loglib.html#var_stdin">stdIn</A> = 5
    integer (kind=short), public, PARAMETER :: <A HREF="loglib.html#var_stdout">stdOut</A> = 6
    character (len=stringLen), private :: <A HREF="loglib.html#var_logfile">logFile</A>
    character, private, PARAMETER :: <A HREF="loglib.html#var_logsep">logsep</A> = ","
    logical, public :: <A HREF="loglib.html#var_logtoscreen">logToScreen</A> = .TRUE.
    logical, public :: <A HREF="loglib.html#var_logtofile">logToFile</A> = .FALSE.
    integer (kind=short), private :: <A HREF="loglib.html#var_loglevel">logLevel</A> = 3
    integer (kind=short), private :: <A HREF="loglib.html#var_ios">ios</A>

        ! Subroutines and functions
    public subroutine <A HREF="loglib.html#subroutine_loginit">LogInit</A> ()
    public subroutine <A HREF="loglib.html#subroutine_logstop">LogStop</A> ()
    private function <A HREF="loglib.html#function_getunit">GetUnit</A> () result (iunit)
    private subroutine <A HREF="loglib.html#subroutine_timestamp">TimeStamp</A> (unit)
    public subroutine <A HREF="loglib.html#subroutine_logmsg">LogMsg</A> (unit, level, process, comment, argument)
    public subroutine <A HREF="loglib.html#subroutine_catch">Catch</A> (level, process, comment, code, argument)

end module LogLib
</PRE>
 This file is part of 
<P>
 MOSAICO -- MOdular library for raSter bAsed hydrologIcal appliCatiOn.
<P>
   Copyright (C) 2011 Giovanni Ravazzani
<P>
   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
<P>
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
<P>
   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
 Module Description: 
   Basic set of routines to handle errors and manage log file.
   Three severity of log are defined:
   error   (logLevel = 1): report only error messages 
   warning (logLevel = 2): report error and warning messages 
   info    (logLevel = 3): report error, warning and informative messages 
   The default logLevel is 3 (write all) and log messages are written 
   on default output unit (screen).If necessary, the user can overried 
   default parameters by passing command line options. The user can choose
   to write messages also on a file and can change the logLevel.
   The module is initialized before the rest of the program takes place
   so it is better that this module is kept self containing and not to
   use utilities contained in other complicated modules that may want
   to use log facilities. 
<P>
<STRONG>Author:</STRONG> <a href="mailto:giovanni.ravazzani@polimi.it">Giovanni Ravazzani</a>
<P>
<STRONG>Version:</STRONG> 1.1 - 25th September 2008

<HR><H2> Description of Variables </H2>
<A NAME="var_verbose"><H3>verbose</H3></A>
<PRE>logical, public :: verbose = .TRUE.
</PRE>
 display messages on the screen
<A NAME="var_logunit"><H3>logUnit</H3></A>
<PRE>integer (kind=short), public :: logUnit
</PRE>
 default value = TRUE
 file unit for log reporting
<A NAME="var_stringlen"><H3>stringLen</H3></A>
<PRE>integer (kind=short), private, PARAMETER :: stringLen = 500
</PRE>
<A NAME="var_stdin"><H3>stdIn</H3></A>
<PRE>integer (kind=short), public, PARAMETER :: stdIn = 5
</PRE>
standard input
<A NAME="var_stdout"><H3>stdOut</H3></A>
<PRE>integer (kind=short), public, PARAMETER :: stdOut = 6
</PRE>
standar output
<A NAME="var_logfile"><H3>logFile</H3></A>
<PRE>character (len=stringLen), private :: logFile
</PRE>
 file for log reporting
<A NAME="var_logsep"><H3>logsep</H3></A>
<PRE>character, private, PARAMETER :: logsep = ","
</PRE>
log separator 
<A NAME="var_logtoscreen"><H3>logToScreen</H3></A>
<PRE>logical, public :: logToScreen = .TRUE.
</PRE>
<A NAME="var_logtofile"><H3>logToFile</H3></A>
<PRE>logical, public :: logToFile = .FALSE.
</PRE>
<A NAME="var_loglevel"><H3>logLevel</H3></A>
<PRE>integer (kind=short), private :: logLevel = 3
</PRE>
log level; default=3
<A NAME="var_ios"><H3>ios</H3></A>
<PRE>integer (kind=short), private :: ios
</PRE>

<HR><H2> Description of Subroutines and Functions </H2>
<A NAME="subroutine_loginit"><H3>LogInit</H3></A>
<PRE>public subroutine LogInit ()
    ! Calls: Catch, Getarg, TimeStamp
end subroutine LogInit
</PRE>
 Description:
   initialize global parameters
<A NAME="subroutine_logstop"><H3>LogStop</H3></A>
<PRE>public subroutine LogStop ()
    ! Calls: TimeStamp
end subroutine LogStop
</PRE>
 Description:
   stop logging. If open, close the log file
<A NAME="function_getunit"><H3>GetUnit</H3></A>
<PRE>private function GetUnit () result (iunit)
    integer (kind=short) :: iunit
end function GetUnit
</PRE>
 Description:
   returns a free FORTRAN unit number
  Discussion:
   A "free" FORTRAN unit number is an integer between 1 and 99 which
   is not currently associated with an I/O device.  A free FORTRAN unit
   number is needed in order to open a file with the OPEN command.
   If IUNIT = 0, then no free FORTRAN unit could be found, although
   all 99 units were checked (except for units 5 and 6).
   Otherwise, IUNIT is an integer between 1 and 99, representing a
   free FORTRAN unit.  Note that GetUnit assumes that units 5 and 6
   are special, and will never return those values.
   Adapted from John Burkardt
<A NAME="subroutine_timestamp"><H3>TimeStamp</H3></A>
<PRE>private subroutine TimeStamp (unit)
    integer (kind=short), INTENT (IN) :: unit
    ! Calls: date_and_time
end subroutine TimeStamp
</PRE>
 Description:
Example:    2008-09-29T21:00:25.624+0200
   Adapted from John Burkardt
<A NAME="subroutine_logmsg"><H3>LogMsg</H3></A>
<PRE>public subroutine LogMsg (unit, level, process, comment, argument)
    integer (kind=short), INTENT(in) :: unit
    character (len=*), INTENT(in) :: level
</PRE>
<DL><DD><DL><DD>
 log level: info, warning, error
</DL></DL>
<PRE>    character (len=*), INTENT(in) :: process
</PRE>
<DL><DD><DL><DD>
 process which puts log
</DL></DL>
<PRE>    character (len=*), INTENT(in) :: comment
</PRE>
<DL><DD><DL><DD>
 comment on log
</DL></DL>
<PRE>    character (len=*), optional, INTENT(in) :: argument
</PRE>
<DL><DD><DL><DD>
 optional argument
</DL></DL>
<PRE>    ! Calls: TimeStamp
end subroutine LogMsg
</PRE>
 Description: 
   write a formatted string on specified unit- It is called by Catch routine
<A NAME="subroutine_catch"><H3>Catch</H3></A>
<PRE>public subroutine Catch (level, process, comment, code, argument)
    character (len=*), INTENT(in) :: level
</PRE>
<DL><DD><DL><DD>
 log level: info | warning | error 
</DL></DL>
<PRE>    character (len=*), INTENT(in) :: process
</PRE>
<DL><DD><DL><DD>
 process which threw esception
</DL></DL>
<PRE>    character (len=*), INTENT(in) :: comment
</PRE>
<DL><DD><DL><DD>
 comment on exception
</DL></DL>
<PRE>    integer (kind=short), optional, INTENT(in) :: code
</PRE>
<DL><DD><DL><DD>
 error code to return
</DL></DL>
<PRE>    character (len=*), optional, INTENT(in) :: argument
</PRE>
<DL><DD><DL><DD>
 optional argument
</DL></DL>
<PRE>    ! Calls: EXIT, LogMsg, LogStop
end subroutine Catch
</PRE>
 Description:
  exception handler
</HTML>
